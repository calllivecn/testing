#!/usr/bin/env python3
#coding=utf-8

import socket,threading,time

buf=1024

A_list=[]

SERVER=('120.24.243.133',6789)

test_addr=('',6789)

s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)

s.bind(test_addr)

s.listen(5)

sA, addressA = s.accept()
data = sA.recv(buf).decode('utf-8')
print('sA :',data)
if data== 'client-A':
		A_list.append(addressA)
		
sB,addressB = s.accept()
data = sB.recv(buf).decode('utf-8')

if data == 'client-B':
		string = A_list[0][0]+','+str(A_list[0][1])
		print('string :',string)
		sB.send(string.encode('utf-8'))
		string = addressB[0]+','+str(addressB[1])
		sA.send(string.encode('utf-8'))

while 1:
		data = sB.recv(buf)
		if data == 'quit':
				break
		
